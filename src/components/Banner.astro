---
// Reusable hero/banner component used by any page/layout.
// Props: title, eyebrow, description, logo, heroImage, updated, cta {label,url}
// Controls: variant ('default' | 'home' | 'compact'), align ('left' | 'center')
import { site } from '../data/site';
import ActivitiesMenu from './ActivitiesMenu.astro';

const {
  title = site.name,
  eyebrow = site.eyebrow ?? site.name,
  description = site.description,
  logo = site.logo,
  heroImage = '',
  updated,
  cta,
  variant = 'default',
  align = 'left',
} = Astro.props;

const padding = {
  home: 'py-24 px-4 pb-16',
  compact: 'py-9 px-4',
  default: 'py-16 px-4 pb-14',
}[variant];

const alignment = align === 'center' ? 'text-center justify-items-center' : 'text-left';
---
<header class={`relative overflow-hidden isolate border-b border-soft bg-gradient-to-b from-bg-top to-bg-mid ${padding} ${alignment}`} style={heroImage ? { backgroundImage: `url(${heroImage})`, backgroundSize: 'cover', backgroundPosition: 'center' } : undefined}>
  <div class="max-w-[72rem] mx-auto grid gap-4 justify-items-start">
    {logo && <img class="w-[clamp(72px,10vw,96px)] h-auto rounded-full shadow-lg bg-white" src={logo} alt={site.name + ' logo'} width="96" height="96" loading="eager" />}
    <div>
      {eyebrow && <div class="uppercase tracking-widest text-[0.8rem] text-muted">{eyebrow}</div>}
      <h1 class="mt-1 text-[clamp(1.75rem,4vw,2.5rem)] leading-[1.15]"><span class="bg-left-bottom bg-no-repeat" style="background-image:linear-gradient(currentColor,currentColor); background-size:100% 3px;">{title}</span></h1>
      {description && <p class="mt-2 text-[#2f3a52] max-w-[60ch]">{description}</p>}
      <div class="flex flex-wrap items-center gap-3 mt-4">
        {cta?.url && cta?.label && (
          <a class="inline-block px-4 py-2 rounded-xl border border-ink font-semibold bg-ink text-white" href={cta.url}>{cta.label}</a>
        )}
        {updated && (
          <span class="mt-2 text-muted text-sm">Last updated: {new Date(updated).toLocaleDateString(undefined, { year: 'numeric', month: 'short', day: '2-digit' })}</span>
        )}
      </div>
      <div class="mt-4">
        <ActivitiesMenu label="Activities" />
      </div>
    </div>
  </div>

  <svg class="absolute left-0 right-0 bottom-[-1px] h-[60px] -z-10" viewBox="0 0 1440 120" preserveAspectRatio="none" aria-hidden="true">
    <path d="M0,64 C240,128 480,0 720,48 C960,96 1200,80 1440,32 L1440,120 L0,120 Z" fill="#fff" />
  </svg>
</header>
