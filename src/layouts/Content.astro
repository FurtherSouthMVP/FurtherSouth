---
import Layout from "./Layout.astro";

interface Props {
  title?: string; // document title
  heading?: string; // visible page heading
  description?: string;
}

// Markdown pages pass frontmatter via `Astro.props.frontmatter`, while
// Astro pages provide props directly. Handle both cases with a type guard
// so we don't mix property access and lose type safety.
type AstroProps = Props | { frontmatter: Props };
const raw = Astro.props as AstroProps;
const {
  title,
  heading = title,
  description,
} = "frontmatter" in raw ? raw.frontmatter : raw;
---

<Layout title={title ?? heading}>
  <article class="prose mx-auto max-w-[48rem] px-4 pb-4 md:px-0">
    {heading && <h1 class="my-4 text-3xl font-bold">{heading}</h1>}
    {description && <p class="mb-8 text-lg text-muted">{description}</p>}
    <slot />
  </article>
</Layout>
